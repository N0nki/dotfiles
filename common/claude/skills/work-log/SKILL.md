---
name: work-log
description: 重要な実装・トラブルシューティング・意思決定を再現可能な記録として .claude_work/work-logs/ に Markdown で保存します。「記録して」「作業ログが欲しい」「ログに残して」「作業内容を記録」などのリクエストで使用してください。
---

# 作業ログ

重要な実装・トラブルシューティング・意思決定を再現可能な記録として `.claude_work/work-logs/` に Markdown で残します。あとから状況を追跡できるように、意図・根拠・結果を必ず揃えます。

## 発動条件

以下のようなリクエストで発動：

- 「記録して」
- 「作業ログが欲しい」
- 「ログに残して」
- 「作業内容を記録」
- 「ドキュメント化して」

## ワークフロー

### 1. 保存ディレクトリの確認・作成

まず、ディレクトリが存在するか確認：

```bash
ls -d .claude_work/work-logs/ 2>/dev/null
```

存在しない場合は作成：

```bash
mkdir -p .claude_work/work-logs
```

### 2. 作業内容の整理

会話内容とリポジトリの状況から以下を整理：

- 作業タイトル（簡潔な日本語）
- 作業の目的
- 実施内容（時系列順）
- 検証結果
- 残課題

### 3. ログファイルの生成

テンプレートに沿って Markdown を生成し、命名規則に従って保存します。

## ファイル命名規則

```
.claude_work/work-logs/{今日の日付}-{英語ケバブケースの作業タイトル}.md
```

**形式:**

- 日付: `YYYY-MM-DD` 形式（例: `2024-04-03`）
- タイトル: 英語のケバブケース（小文字、ハイフン区切り）
- 拡張子: 必ず `.md`

**例:**

- `2024-04-03-mongodb-data-import.md`
- `2024-04-03-fix-authentication-bug.md`
- `2024-04-03-refactor-user-api.md`

日付の取得コマンド：

```bash
date "+%F"
```

## 記載必須項目

### 1. タイトル

形式: `# YYYY-MM-DD 日本語タイトル`

例: `# 2024-04-03 MongoDB データインポート機能の実装`

### 2. 概要

1-2 文で作業内容を要約

### 3. 背景と目的

箇条書きで以下を記載：

- 期待する成果
- 解決したい課題
- 既知の制約条件

### 4. 実施手順

**時系列に番号付きリスト**で記載し、以下を含める：

- 使用したコマンド
- 実行したスクリプト
- 編集したファイルとその内容
- 再現可能な粒度で記述

例：

````markdown
1. 依存パッケージのインストール
   ```bash
   npm install mongodb mongoose
   ```
````

2. データベース接続設定ファイルを作成
   `config/database.js` に接続文字列を設定
3. ...

````

### 5. 結果と検証

以下を記載：
- 成果物
- 確認方法
- 使用したチェックコマンド
- テスト結果
- スクリーンショット情報（あれば）

### 6. 作成・変更ファイル

以下の形式で列挙：
```markdown
- `path/to/file`: 変更概要
````

例：

```markdown
- `src/db/connection.js`: MongoDB 接続処理を追加
- `src/models/User.js`: User モデルを新規作成
- `package.json`: mongodb, mongoose を追加
```

### 7. 判断・注意事項

- 検討した複数の案
- 採用しなかった理由
- 追加の注意点
- リスクや制限事項

途中で選択肢を比較した場合は、検討した案と最終判断理由を残す。

### 8. 次のアクション

- 未完了作業
- フォローアップタスク
- 今後の改善点

## 推奨追加情報

可能であれば以下も記載：

### 環境情報

- OS（macOS, Ubuntu など）
- 端末情報
- 重要なバージョン（Node.js, Python など）

### 使用ツール・サービス

- 使用したライブラリ、フレームワーク
- 外部サービス、API

### 問題やリスク

- 既知の制限
- 潜在的な問題点
- 将来の改善が必要な箇所

### 参考資料

- 参照した URL
- ドキュメント名
- 関連する issue や PR

## 記載ルール

### セキュリティ

**絶対に記載禁止:**

- パスワード
- 秘密鍵、API キー
- アクセストークン
- 個人情報（メールアドレス、電話番号など）

**安全な記載方法:**

- 環境変数名で表現: `<ENV_VAR>`、`$DATABASE_PASSWORD`
- マスク表記: `****`、`<REDACTED>`
- プレースホルダー: `<YOUR_API_KEY>`

例：

```markdown
❌ 悪い例:
export API_KEY="sk_live_abc123def456"

✅ 良い例:
export API_KEY="<YOUR_API_KEY>"
```

### フォーマット

**Markdown ルール:**

- 見出しレベルを統一（`#` の数を適切に）
- コードブロックには必ず言語を指定
  ```bash
  npm install
  ```
  ```json
  { "key": "value" }
  ```
- 表やリストは読みやすさを優先
- インデントを崩さない

**再現性の担保:**

- 手順には具体的なコマンドを記載
- ログや出力結果を引用
- エラーメッセージは正確にコピー

### 言語

**基本方針:**

- 本文は日本語で記述
- コマンド、ファイル名、設定キーは原文のまま
- 技術用語は一般的に使われる英語表記を優先（無理にカタカナ化しない）

**例:**

- ✅ repository、commit、pull request
- ❌ リポジトリー、コミット、プルリクエスト（一般的な用語は英語のままでOK）

## テンプレート

````markdown
# YYYY-MM-DD 日本語作業タイトル

## 概要

1-2 行で作業内容を要約

## 背景と目的

- 目的や期待する成果
- 既知の制約やトリガーになった課題

## 実施手順

1. ステップ1の説明
   ```bash
   実行したコマンド
   ```
````

2. ステップ2の説明（ファイル編集内容など）
3. ...

## 結果と検証

- 成果物の説明
- 確認コマンド
  ```bash
  npm test
  ```
- テスト結果やログ

## 作成・変更ファイル

- `path/to/file1`: 変更概要1
- `path/to/file2`: 変更概要2

## 判断・注意事項

- 検討した案A: 理由で不採用
- 検討した案B: 理由で採用
- 追加の注意点

## 次のアクション

- [ ] フォローアップタスク1
- [ ] 未完了作業2

## 環境情報

- OS: macOS 14.0
- Node.js: v20.10.0
- npm: 10.2.3

## 使用ツール・サービス

- Express.js 4.18.2
- MongoDB 6.0
- Mongoose 8.0.0

## 参考資料

- [MongoDB Documentation](https://docs.mongodb.com/)
- [関連 Issue #123](https://github.com/user/repo/issues/123)

````

## 実行例

### 例1: データベース接続機能の実装

**ユーザー:** 「MongoDB への接続機能を実装したので、作業ログを残して」

**Claude の対応:**

1. ディレクトリ確認・作成
   ```bash
   mkdir -p .claude_work/work-logs
````

2. 会話内容から以下を整理：
   - タイトル: 「MongoDB 接続機能の実装」
   - 英語タイトル: `mongodb-connection-setup`
   - 実施内容、検証結果、変更ファイルなど

3. ファイル生成

   ```bash
   # 今日の日付を取得
   TODAY=$(date "+%F")
   # ファイル名: 2024-04-03-mongodb-connection-setup.md
   ```

4. テンプレートに従って内容を記載し、保存

### 例2: バグ修正の記録

**ユーザー:** 「認証バグを修正したので記録して」

**Claude の対応:**

1. 会話履歴から以下を抽出：
   - 発生していた問題
   - 原因の特定プロセス
   - 修正内容
   - 検証方法

2. ファイル名: `2024-04-03-fix-authentication-bug.md`

3. 「判断・注意事項」セクションに：
   - 試した修正案
   - 最終的に採用した解決策とその理由

## 注意事項

### ファイル上書き

同じ日付・同じタイトルのファイルが既に存在する場合：

1. ユーザーに確認する
2. 上書きするか、別名（末尾に `-2` などを追加）で保存するか選択してもらう

### 大規模な作業

複数日にわたる大規模な作業の場合：

- 各日の進捗を別ファイルとして記録
- または、作業完了時に1つの包括的なログにまとめる

ユーザーの好みを確認してから記録方法を決定してください。

### 機密情報の確認

ログに含まれる内容にパスワードや API キーなどの機密情報が含まれていないか、保存前に必ず確認してください。
